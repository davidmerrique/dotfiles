#!/usr/bin/env zsh

function updateall() {
  sudo -v

  while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

  update_commands=(
    "rcup -d $DOTFILES"
    "brew update"
    "brew upgrade --all"
    "brew prune"
    "brew cleanup"
    "brew linkapps"
    "composer self-update"
    "phpbrew self-update"
    "phpbrew known --update"
    "$DOTFILES/bin/nvmup"
    "npm cache clean -g"
    "$DOTFILES/npm-upgrade.sh"
    "gem update"
    "gem update --system"
    "zgen selfupdate"
    "zgen update"
  )

  printf "\n**** Running: $i *****\n\n"
  for i in "${update_commands[@]}"; do
    printf "\n**** Running: $i *****\n\n"
    eval ${i}
  done
}
