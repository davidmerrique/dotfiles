#!/usr/bin/env zsh

sudo -v

while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

source ~/.zsh/antigen/antigen.zsh
source ~/.dotfiles/zsh/aliases.zsh
source $DOTFILES/lib/utils

update_commands=(
  "rcup -d $DOTFILES"
  "brew update"
  "brew upgrade --all"
  "brew prune"
  "brew cleanup"
  "brew linkapps"
  "phpbrew self-update"
  "phpbrew known --update"
  "$DOTFILES/bin/nvmup"
  "npm cache clean -g"
  "$DOTFILES/npm-upgrade.sh"
  "gem update"
  "gem update --system"
  "composer self-update"
  "antigen update"
  "antigen cleanup --force"
  "reload!"
)

e_header "Updating..."
for i in "${update_commands[@]}"; do
  e_header "**** Running: $i *****"
  eval ${i}
done
